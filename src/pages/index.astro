---
import { getHighlighter } from 'shiki';

// 语法高亮处理
const highlighter = await getHighlighter({
  themes: ['github-light', 'github-dark'],
  langs: ['javascript', 'typescript', 'python', 'bash'],
});

const codeSnippets = {
  javascript: `// 示例 JavaScript 代码
function greet(name) {
  return \`Hello, ${name}!\`;
}

const message = greet('Developer');
console.log(message);`,
  typescript: `// 示例 TypeScript 代码
interface User {
  id: number;
  name: string;
  email: string;
}

function createUser(user: User): User {
  return { ...user };
}`,
  python: `# 示例 Python 代码
def factorial(n):
    if n <= 1:
        return 1
    return n * factorial(n - 1)

result = factorial(5)
print(f"Factorial of 5 is: {result}")`,
};

// 生成高亮代码
const highlightedCode = {
  javascript: highlighter.codeToHtml(codeSnippets.javascript, {
    lang: 'javascript',
    theme: 'github-light',
  }),
  typescript: highlighter.codeToHtml(codeSnippets.typescript, {
    lang: 'typescript',
    theme: 'github-light',
  }),
  python: highlighter.codeToHtml(codeSnippets.python, {
    lang: 'python',
    theme: 'github-light',
  }),
};
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DevTools - Developer Toolkit</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="/src/styles/global.css">
  <script>
    // 深色模式切换逻辑
    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }

    function toggleTheme() {
      document.documentElement.classList.toggle('dark');
      localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    }
  </script>
</head>
<body>
  <!-- 导航栏 -->
  <nav class="navbar">
    <div class="container navbar-container">
      <a href="/" class="logo">DevTools</a>
      <div class="nav-links">
        <a href="#features" class="nav-link">Features</a>
        <a href="#code" class="nav-link">Code</a>
        <a href="#comparison" class="nav-link">Comparison</a>
        <a href="#integrations" class="nav-link">Integrations</a>
        <a href="#docs" class="nav-link">Docs</a>
        <button class="theme-toggle" onclick="toggleTheme()">
          <i class="fas" id="theme-icon"></i>
        </button>
        <a href="#" class="btn btn-primary">Get Started</a>
      </div>
    </div>
  </nav>

  <!-- 头部区域 -->
  <section class="hero">
    <div class="container">
      <h1>Powerful Developer Tools for Modern Teams</h1>
      <p>Streamline your workflow with our comprehensive toolkit designed for developers. Build, test, and deploy with ease.</p>
      <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
        <a href="#" class="btn btn-primary">Get Started</a>
        <a href="#docs" class="btn btn-outline">View Documentation</a>
      </div>
    </div>
  </section>

  <!-- 特性部分 -->
  <section class="features" id="features">
    <div class="container">
      <h2>Key Features</h2>
      <div class="features-grid">
        <div class="feature-card">
          <h3><i class="fas fa-code" style="margin-right: 0.5rem; color: var(--accent-primary);"></i> Code Editor</h3>
          <p>Advanced code editor with syntax highlighting, auto-completion, and real-time collaboration features.</p>
        </div>
        <div class="feature-card">
          <h3><i class="fas fa-terminal" style="margin-right: 0.5rem; color: var(--accent-primary);"></i> Terminal</h3>
          <p>Built-in terminal with support for multiple shells and integrated version control.</p>
        </div>
        <div class="feature-card">
          <h3><i class="fas fa-database" style="margin-right: 0.5rem; color: var(--accent-primary);"></i> Database Tools</h3>
          <p>Manage and query databases with intuitive interfaces and powerful query builders.</p>
        </div>
        <div class="feature-card">
          <h3><i class="fas fa-cloud" style="margin-right: 0.5rem; color: var(--accent-primary);"></i> Deployment</h3>
          <p>One-click deployment to major cloud providers with CI/CD integration.</p>
        </div>
        <div class="feature-card">
          <h3><i class="fas fa-test-tube" style="margin-right: 0.5rem; color: var(--accent-primary);"></i> Testing</h3>
          <p>Comprehensive testing tools with test runners and coverage reports.</p>
        </div>
        <div class="feature-card">
          <h3><i class="fas fa-cogs" style="margin-right: 0.5rem; color: var(--accent-primary);"></i> Extensions</h3>
          <p>Extensible architecture with a rich ecosystem of plugins and extensions.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- 代码预览部分 -->
  <section class="code-preview" id="code">
    <div class="container">
      <h2>Code Preview</h2>
      <div class="code-container">
        <div class="code-header">
          <div class="code-title">JavaScript</div>
          <div class="code-actions">
            <div class="code-dot code-dot-red"></div>
            <div class="code-dot code-dot-yellow"></div>
            <div class="code-dot code-dot-green"></div>
          </div>
        </div>
        <pre><code class="language-javascript">{codeSnippets.javascript}</code></pre>
      </div>
      <div class="code-container">
        <div class="code-header">
          <div class="code-title">TypeScript</div>
          <div class="code-actions">
            <div class="code-dot code-dot-red"></div>
            <div class="code-dot code-dot-yellow"></div>
            <div class="code-dot code-dot-green"></div>
          </div>
        </div>
        <pre><code class="language-typescript">{codeSnippets.typescript}</code></pre>
      </div>
      <div class="code-container">
        <div class="code-header">
          <div class="code-title">Python</div>
          <div class="code-actions">
            <div class="code-dot code-dot-red"></div>
            <div class="code-dot code-dot-yellow"></div>
            <div class="code-dot code-dot-green"></div>
          </div>
        </div>
        <pre><code class="language-python">{codeSnippets.python}</code></pre>
      </div>
    </div>
  </section>

  <!-- 功能对比表格 -->
  <section class="feature-table" id="comparison">
    <div class="container">
      <h2>Feature Comparison</h2>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Feature</th>
              <th>Free</th>
              <th>Pro</th>
              <th>Enterprise</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Code Editor</td>
              <td>✓</td>
              <td>✓</td>
              <td>✓</td>
            </tr>
            <tr>
              <td>Terminal Access</td>
              <td>✓</td>
              <td>✓</td>
              <td>✓</td>
            </tr>
            <tr>
              <td>Database Tools</td>
              <td>Limited</td>
              <td>✓</td>
              <td>✓</td>
            </tr>
            <tr>
              <td>Deployment</td>
              <td>Limited</td>
              <td>✓</td>
              <td>✓</td>
            </tr>
            <tr>
              <td>Testing Tools</td>
              <td>Limited</td>
              <td>✓</td>
              <td>✓</td>
            </tr>
            <tr>
              <td>Extensions</td>
              <td>Limited</td>
              <td>✓</td>
              <td>✓</td>
            </tr>
            <tr>
              <td>Collaboration</td>
              <td>No</td>
              <td>Limited</td>
              <td>✓</td>
            </tr>
            <tr>
              <td>Priority Support</td>
              <td>No</td>
              <td>Email</td>
              <td>24/7</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- 集成标志 -->
  <section class="integrations" id="integrations">
    <div class="container">
      <h2>Integrations</h2>
      <div class="integrations-grid">
        <div class="integration-logo">GitHub</div>
        <div class="integration-logo">GitLab</div>
        <div class="integration-logo">Bitbucket</div>
        <div class="integration-logo">AWS</div>
        <div class="integration-logo">Azure</div>
        <div class="integration-logo">Google Cloud</div>
        <div class="integration-logo">Docker</div>
        <div class="integration-logo">Kubernetes</div>
      </div>
    </div>
  </section>

  <!-- 文档部分 -->
  <section class="documentation" id="docs">
    <div class="container">
      <h2>Comprehensive Documentation</h2>
      <p>Get started quickly with our detailed documentation. Learn how to use all features and integrate with your existing workflow.</p>
      <a href="#" class="btn btn-primary">View Documentation</a>
    </div>
  </section>

  <!-- 页脚 -->
  <footer class="footer">
    <div class="container">
      <p>&copy; 2026 DevTools. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // 更新主题图标
    function updateThemeIcon() {
      const icon = document.getElementById('theme-icon');
      if (document.documentElement.classList.contains('dark')) {
        icon.className = 'fas fa-sun';
      } else {
        icon.className = 'fas fa-moon';
      }
    }

    // 初始化主题图标
    updateThemeIcon();

    // 监听主题切换
    document.querySelector('.theme-toggle').addEventListener('click', updateThemeIcon);

    // 为代码块添加语法高亮
    document.querySelectorAll('code[class^="language-"]').forEach((block) => {
      const language = block.className.replace('language-', '');
      const code = block.textContent;
      
      // 这里我们使用CSS类来实现语法高亮，而不是依赖shiki的HTML输出
      // 实际项目中可以使用shiki生成的HTML
    });
  </script>
</body>
</html>